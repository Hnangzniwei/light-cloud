name: Terraform <LaTex>${{ github.event\_name == 'workflow\_dispatch' && 'Manual Deployment' || 'Automatic Plan' }}[ty-n][ty-n]on:[ty-n]  push:[ty-n]    branches:[ty-n]      - main[ty-n]  workflow\_dispatch:[ty-n]    inputs:[ty-n]      cloud\_provider:[ty-n]        description: 'Cloud Provider (tencent or aws)'[ty-n]        required: true[ty-n]        default: 'tencent'[ty-n]        type: string[ty-n]      action:[ty-n]        description: 'Terraform action: plan or apply'[ty-n]        required: true[ty-n]        default: 'plan'[ty-n]        type: string[ty-n]        options:[ty-n]          - plan[ty-n]          - apply[ty-n][ty-n]jobs:[ty-n]  terraform:[ty-n]    runs-on: ubuntu-latest[ty-n]    environment: production[ty-n][ty-n]    steps:[ty-n]      - name: Checkout code[ty-n]        uses: actions/checkout@v4[ty-n][ty-n]      - name: Setup Terraform[ty-n]        uses: hashicorp/setup-terraform@v3[ty-n]        with:[ty-n]          terraform\_version: 1.6.6[ty-n][ty-n]      - name: Terraform Init[ty-n]        run: terraform init[ty-n]        env:[ty-n]          TF\_VAR\_TENCENT\_SECRET\_ID: $</LaTex>{{ secrets.TENCENT_SECRET_ID }}
          TF_VAR_TENCENT_SECRET_KEY: <LaTex>${{ secrets.TENCENT\_SECRET\_KEY }}[ty-n][ty-n]      - name: Terraform Plan[ty-n]        run: |[ty-n]          terraform plan \[ty-n]            -var="cloud\_provider=$</LaTex>{{ github.event.inputs.cloud_provider || 'tencent' }}" \
            -var="instance_password=<LaTex>${{ secrets.INSTANCE\_PASSWORD }}" \[ty-n]            -no-color[ty-n]        env:[ty-n]          TF\_VAR\_TENCENT\_SECRET\_ID: $</LaTex>{{ secrets.TENCENT_SECRET_ID }}
          TF_VAR_TENCENT_SECRET_KEY: <LaTex>${{ secrets.TENCENT\_SECRET\_KEY }}[ty-n][ty-n]      - name: Terraform Apply[ty-n]        if: github.event\_name == 'workflow\_dispatch' && github.event.inputs.action == 'apply'[ty-n]        run: |[ty-n]          terraform apply \[ty-n]            -var="cloud\_provider=$</LaTex>{{ github.event.inputs.cloud_provider }}" \
            -var="instance_password=<LaTex>${{ secrets.INSTANCE\_PASSWORD }}" \[ty-n]            -auto-approve[ty-n]        env:[ty-n]          TF\_VAR\_TENCENT\_SECRET\_ID: $</LaTex>{{ secrets.TENCENT_SECRET_ID }}
          TF_VAR_TENCENT_SECRET_KEY: ${{ secrets.TENCENT_SECRET_KEY }}
